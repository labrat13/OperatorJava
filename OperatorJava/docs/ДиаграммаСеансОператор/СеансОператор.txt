================================
Документация проект OperatorJava
(C) 2022 Павел Селяков.
================================


Тут нужна абстрактная модель последовательности событий, и поверх нее уже все прочее добавлять.


Сеанс Оператор
- запуск приложения Оператор.
- инициализация подсистем Оператор
- событие onStartUp()
- исполняется стартап:
  - вывести сообщение о начале процедуры startUp.
    - скрыть стартап не получится - процедуры же должны выводить на экран информацию итп.
    - возможность отменить стартап - полезная штука в некоторых ситуациях, 
       но она требует реализовать процедуру вопрос-ответ с таймаутом и дефолтовым ответом при истечении таймаута.
       Я пока не придумал эту возможность. 
      - todo: запроектировать диалог вопрос-ответ с таймаутом и значением при истечении таймаута.
  - если в ФайлНастроекОператор поле onStartUp существует и не пустое, то:
    - строка содержимого поля запускается на исполнение как команда либо как путь Процедуры.
      - Если строка - путь процедуры, то запускается Процедура.
        Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.
  - иначе:
    - выбрать из таблицы БД ТаблицаЗначенийОператор (todo: придумать более лучшее название для таблицы) 
      записи по ключу OnStartUp - может быть несколько значений с одинаковым ключом.
    - строка содержимого поля value запускается на исполнение как команда либо как путь Процедуры.
      - Если строка - путь процедуры, то запускается Процедура.
        - todo: нужна функция для запуска Процедуры без аргументов по ее пути.
        Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.  
  - todo: пост-обработка для КодЗавершенияПроцедуры здесь не выполняется?
- завершить стартап.
  - вывести сообщение о завершении процедуры startUp.    
- вывести приглашение пользователю.
- ожидать ввод пользователя.
- если команда пользователя поступила:
  - событие onUserCommand()
  - если команда встроенная, то:
    - определить тип команды.
    - если в ФайлНастроекОператор поле для данного типа команды существует и не пустое, то:
      - строка содержимого поля запускается на исполнение как команда либо как путь Процедуры.
        - Если строка - путь процедуры, то запускается Процедура.
          Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.
    - иначе:
      - выбрать из таблицы БД ТаблицаЗначенийОператор (todo: придумать более лучшее название для таблицы) 
        записи по ключу для данного типа команды - может быть несколько значений с одинаковым ключом.
      - строка содержимого поля value запускается на исполнение как команда либо как путь Процедуры.
        - Если строка - путь процедуры, то запускается Процедура.
          Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.
    - todo: пост-обработка для КодЗавершенияПроцедуры здесь не выполняется?
  
  - иначе:
    - передать в МеханизмИсполненияКоманд Оператор.
- Процедура возвращает КодЗавершенияПроцедуры.
  - событие onProcedureFinish(); 
    либо onProcedureError(); todo: уточнить всю эту часть!  
- Тут нужно вызвать процедуру пост-обработки для данного КодЗавершенияПроцедуры.
  Если код требует выполнения завершающей операции, то:    
  - событие onPostProcedure();
  - если в ФайлНастроекОператор поле для данного типа операции существует и не пустое, то:
      - строка содержимого поля запускается на исполнение как команда либо как путь Процедуры.
        - Если строка - путь процедуры, то запускается Процедура.
          Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.
    - иначе:
      - выбрать из таблицы БД ТаблицаЗначенийОператор (todo: придумать более лучшее название для таблицы) 
        записи по ключу для данного типа команды - может быть несколько значений с одинаковым ключом.
      - строка содержимого поля value запускается на исполнение как команда либо как путь Процедуры.
        - Если строка - путь процедуры, то запускается Процедура.
          Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор. 
   - todo: пост-обработка для КодЗавершенияПроцедуры здесь не выполняется?
- иначе:
- завершение приложения
- событие onFinish()
- исполняется финиш: так же, как onStartUp(), только  ключ другой.
  - вывести сообщение о начале процедуры onFinish().
    - скрыть финиш не получится - процедуры же должны выводить на экран информацию итп.
    - возможность отменить финиш - полезная штука в некоторых ситуациях, 
       но она требует реализовать процедуру вопрос-ответ с таймаутом и дефолтовым ответом при истечении таймаута.
       Я пока не придумал эту возможность. 
      - todo: запроектировать диалог вопрос-ответ с таймаутом и значением при истечении таймаута.
  - если в ФайлНастроекОператор поле onFinish существует и не пустое, то:
    - строка содержимого поля запускается на исполнение как команда либо как путь Процедуры.
      - Если строка - путь процедуры, то запускается Процедура.
        Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.
  - иначе:
    - выбрать из таблицы БД ТаблицаЗначенийОператор (todo: придумать более лучшее название для таблицы) 
      записи по ключу OnFinish - может быть несколько значений с одинаковым ключом.
    - строка содержимого поля value запускается на исполнение как команда либо как путь Процедуры.
      - Если строка - путь процедуры, то запускается Процедура.
        Иначе - считать строку командой и передать в МеханизмИсполненияКоманд Оператор.  
    - пост-обработка для КодЗавершенияПроцедуры здесь не выполняется!
- событие onExit()
- деинициализация подсистем Оператор
- завершение приложения.